<ngx-spinner type="timer"></ngx-spinner>
<div id="clientes" class="page-layout simple fullwidth docs">
    <!-- HEADER -->
    <div class="header p-16 p-sm-24" fxLayout="column" fxLayoutAlign="center center">
        <div class="hero-text content">
            <h1>Tablero de iniciativas pendientes por firmar</h1>
            <h3>Listado de iniciativas pendientes por firmar</h3>
        </div>
    </div>
    <!-- / HEADER -->
    <div class="content p-24" align="center" style="border: 1px">
        <div class="content">

            <form class="form" [formGroup]="form" name="form">
                <div class="form-quest">
                    <!-- Subir archivos -->
                    <mat-form-field>
                        <mat-label>Subir certificado </mat-label>
                        <!-- placeholder="Removable Input" -->
                        <ngx-mat-file-input #removableCertificado [accept]="'.cer'" formControlName="cSubirCertificado"
                            (change)="cambioCertificado($event)">
                        </ngx-mat-file-input>
                        <button id="btnCertificado" *ngIf="!removableCertificado.empty" mat-icon-button matSuffix
                            (click)="removableCertificado.clear($event)">
                            <mat-icon>clear</mat-icon>
                        </button>
                    </mat-form-field>
                </div>
                <div class="form-quest">
                    <!-- Subir archivos -->
                    <mat-form-field>
                        <mat-label>Subir llave </mat-label>
                        <!-- placeholder="Removable Input" -->
                        <ngx-mat-file-input #removableLlave [accept]="'.key'" formControlName="cSubirLlave"
                            (change)="cambioLlave($event)">
                        </ngx-mat-file-input>
                        <button id="btnLLave" name="btnLLave" *ngIf="!removableLlave.empty" mat-icon-button matSuffix
                            (click)="removableLlave.clear($event)">
                            <mat-icon>clear</mat-icon>
                        </button>
                    </mat-form-field>
                </div>
                <div class="form-quest">
                    <!-- Subir archivos -->
                    <mat-form-field>
                        <input matInput type="text"   [ngClass]="{'pw': this.type === 'password'}" autocomplete="off" formControlName="cPassword">
                        <mat-icon *ngIf="this.type ==='password'"matSuffix class="secondary-text" (click)="viewPassword()">visibility</mat-icon>
                        <mat-icon *ngIf="this.type !=='password'" matSuffix class="secondary-text" (click)="viewPassword()">
                            visibility_off</mat-icon>
    
                        <mat-label>Contrase√±a </mat-label>
                       
                    </mat-form-field>
                </div>
                <div class="buscador">
                    <mat-form-field class="buscar">
                        <mat-label>Buscar</mat-label>
                        <input type='text' matInput placeholder='' [(ngModel)]="searchText"
                            (keyup)='filterDatatable($event)'>
                    </mat-form-field>
                        <!--
                    <button [disabled]="form.invalid" mat-raised-button color="warn" (click)="firmarDocumentos()"
                        class="button">
                        <mat-icon color="white" class="material-icons" matTooltip="Clic para firmar documentos">post_add
                        </mat-icon>
                        Firmar documentos
                    </button>
                   <button  mat-raised-button color="warn" (click)="limpiarCampos()"
                        class="button">
                        <mat-icon color="white" class="material-icons" matTooltip="Clic para firmar documentos">post_add
                        </mat-icon>
                        Firmar documentos
                    </button>
                   
                    <button  mat-raised-button  (click)="pruebaTurnado()"
                    class="button">
                    <mat-icon color="white" class="material-icons" matTooltip="Clic para firmar documentos">post_add
                    </mat-icon>
                   Prueba Turnado
                </button>
                -->
                </div>

                <table class="ocultar">
                    <tr>
                        <td><textarea id="certificado" #certificado cols="68" rows="4"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <td><textarea id="llave" #llave cols="68" rows="4"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <td><textarea id="password" #password cols="68" rows="4"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <td><textarea id="hashToSign" #hashToSign cols="68" rows="4"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <td>

                            <textarea id="signature" #signature name="signature" cols="68" rows="4"></textarea>

                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td><button id="btnSing" name="button" onclick="signData()">Sign</button></td>
                    </tr>

                </table>
            </form>
            <ngx-datatable class="material shadow-none" [rows]="documentosPendientes"
                [loadingIndicator]="loadingIndicator" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
                [rowHeight]="'auto'" [reorderable]="reorderable" [limit]="10" [scrollbarH]="true">
                <!-- <ngx-datatable-column name="Id. Tipo de expediente" prop="id" ></ngx-datatable-column> -->
                <ngx-datatable-column name="Documento" prop="documento.cNombreDocumento" [width]="20">
                </ngx-datatable-column>
                <ngx-datatable-column name="Proceso" prop="estatusIniciativa"></ngx-datatable-column>
                <ngx-datatable-column name="Autorizaciones pendientes" prop="autorizacionesPendientes">
                </ngx-datatable-column>

                <ngx-datatable-column name="Firmar" sortable="false" prop="id" >
                    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                        <a *ngIf="!form.invalid" (click)="firmarDocumento(row)" > 
                            <mat-icon color="primary" class="material-icons pointer" matTooltip="Clic para eliminar">assignment_turned_in
                            </mat-icon>
                        </a>
                        <a *ngIf="form.invalid"  > 
                            <mat-icon color="warn"  matTooltip="Clic para eliminar">assignment_late
                            </mat-icon>
                        </a>
                      
                    </ng-template>
                </ngx-datatable-column>
            </ngx-datatable>
        </div>
    </div>
</div>