<!-- <div id="forms" class="page-layout simple fullwidth" fxLayout="column"> -->

<!-- HEADER -->
<!-- <div class="header accent p-24 h-60" fxLayout="row" fxLayoutAlign="start center">
        <div fxLayout="column" fxLayoutAlign="center start">
            <div class="h2 mt-16">Guardar usuario</div>
        </div>
    </div> -->
<!-- / HEADER -->

<!-- CONTENT -->
<!-- <div class="content p-24"> -->
    <ngx-spinner type="timer"></ngx-spinner>
<div class="mb-24" fxLayout="column" fxLayoutAlign="start" fxLayout.gt-md="row">

    <!-- REACTIVE FORM EXAMPLE -->


    <form class="mat-card mat-elevation-z4" fxLayout="column" fxLayoutAlign="start" fxFlex="1 0 auto" name="form"
        [formGroup]="form">

        <div class="h2 mb-24">Perfiles de usuario</div>


        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

            <mat-form-field appearance="outline" fxFlex="80" class="pr-4">
                <mat-label>Perfil de usuario:</mat-label>
                <input matInput formControlName="nombre">
                <mat-icon matSuffix class="secondary-text">account_circle</mat-icon>

                <mat-error *ngIf="form.get('nombre').hasError('required')">El nombre es requerido</mat-error>
                <mat-error *ngIf="form.get('nombre').hasError('minlength') || form.get('nombre').hasError('maxlength')">
                    Valor invalido, el mínimo de caracteres es 3 y el máximo son 100 </mat-error>

            </mat-form-field>

            <mat-label class="cEstatus">Estatus</mat-label>
            <mat-radio-group fxLayout="column" fxLayoutAlign="start start">
                <mat-checkbox class="example-margin" formControlName="estatus" (click)="validaEstatus()"></mat-checkbox>

            </mat-radio-group>

        </div>

    </form>
</div>

<div class="h2 mb-24">Permisos
    <div align="right" style="border: 1px">
        <button mat-raised-button color="accent" (click)="nuevoPermisoUsuario()">
            <mat-icon color="white" class="material-icons" matTooltip="Clic para añadir un nuevo permiso de usuario">
                person_add</mat-icon>
            Nuevo Permiso
        </button>
    </div>
</div>

<mat-tab-group (selectedTabChange)="clickOpcion()" animationDuration="1000ms">

    <mat-tab label="Tipo de información">

        <mat-form-field>

            <mat-label>Buscar</mat-label>
            <input type='text' matInput placeholder='' (keyup)='filterVisibilidad($event)'
                [(ngModel)]="buscadorVisibilidad">

        </mat-form-field>

        <mat-icon class="buscar">search</mat-icon>
        Seleccionar todos
        <mat-checkbox class="example-margin" [(ngModel)]="selectedVisibilidad" (click)="seleccionarVisibilidad()">
        </mat-checkbox>

        <ngx-datatable class="material" [rows]="rowVisibilidad" [loadingIndicator]="loadingIndicator"
            [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'"
            [reorderable]="reorderable" [limit]="10">
            <ngx-datatable-column name="Tipo de información" prop="cDescripcionVisibilidad"></ngx-datatable-column>
            <ngx-datatable-column name="Permite" sortable="false" prop="id">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <mat-checkbox class="example-margin" [(ngModel)]="row.Si">
                    </mat-checkbox>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Acciones" sortable="false" prop="id">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>

                    <a (click)="eliminarVisibilidad(row)">
                        <mat-icon color="warn" class="material-icons pointer" matTooltip="Clic para eliminar">delete
                        </mat-icon>
                    </a>

                    <a (click)="guardarVisibilidad(row)">
                        <mat-icon color="primary" class="material-icons pointer" matTooltip="Clic para editar">edit
                        </mat-icon>
                    </a>

                </ng-template>
            </ngx-datatable-column>
        </ngx-datatable>
    </mat-tab>
    <mat-tab label="Opción del sistema">
        <mat-form-field>

            <mat-label>Buscar</mat-label>
            <input type='text' matInput placeholder='' (keyup)='filterOpciones($event)' [(ngModel)]="buscadorOpciones">

        </mat-form-field>

        <mat-icon class="buscar">search</mat-icon>
        Seleccionar todos
        <mat-checkbox class="example-margin" [(ngModel)]="selectedOpciones" (click)="seleccionarOpciones()">
        </mat-checkbox>
        <ngx-datatable class="material" [rows]="rows" [loadingIndicator]="loadingIndicator" [columnMode]="'force'"
            [headerHeight]="48" [footerHeight]="56" [rowHeight]="'auto'" [scrollbarH]="true" [reorderable]="reorderable"
            [limit]="10">
            <ngx-datatable-column name="Permiso" prop="cNombreOpcion"></ngx-datatable-column>
            <ngx-datatable-column name="Agregar" sortable="false" prop="id">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <mat-checkbox class="example-margin" [(ngModel)]="row.Agregar">
                    </mat-checkbox>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Consultar" sortable="false" prop="id">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <mat-checkbox class="example-margin" [(ngModel)]="row.Consultar">
                    </mat-checkbox>
                </ng-template>

            </ngx-datatable-column>
            <ngx-datatable-column name="Editar" sortable="false" prop="id">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <mat-checkbox class="example-margin" [(ngModel)]="row.Editar" (change)="editarOpcionesCheck(row)">
                    </mat-checkbox>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Eliminar" sortable="false" prop="id">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <mat-checkbox class="example-margin" [(ngModel)]="row.Eliminar" (change)="editarOpcionesCheck(row)">
                    </mat-checkbox>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Acciones" sortable="false" prop="id">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>

                    <a (click)="eliminarOpcion(row)">
                        <mat-icon color="warn" class="material-icons pointer" matTooltip="Clic para eliminar">delete
                        </mat-icon>
                    </a>

                    <a (click)="guardarOpcion(row)">
                        <mat-icon color="primary" class="material-icons pointer" matTooltip="Clic para editar">edit
                        </mat-icon>
                    </a>

                </ng-template>
            </ngx-datatable-column>
        </ngx-datatable>
    </mat-tab>
    <mat-tab label="Tipo de documento">
        <mat-form-field>

            <mat-label>Buscar</mat-label>
            <input type='text' matInput placeholder='' (keyup)='filterDocumentos($event)'
                [(ngModel)]="buscadorDocumentos">

        </mat-form-field>

        <mat-icon class="buscar">search</mat-icon>
        Seleccionar todos
        <mat-checkbox class="example-margin" [(ngModel)]="selectedDocumentos" (click)="seleccionarTipoDocumento()">
        </mat-checkbox>
        <ngx-datatable class="material" [rows]="rowsDocumentos" [loadingIndicator]="loadingIndicator"
            [columnMode]="'force'" [headerHeight]="48" [footerHeight]="56" [rowHeight]="'auto'" [scrollbarH]="true"
            [reorderable]="reorderable" [limit]="10">
            <ngx-datatable-column name="Permiso" prop="cDescripcionTipoDocumento"></ngx-datatable-column>
            <ngx-datatable-column name="Agregar" sortable="false" prop="id">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <mat-checkbox class="example-margin" [(ngModel)]="row.Agregar">
                    </mat-checkbox>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Consultar" sortable="false" prop="id">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <mat-checkbox class="example-margin" [(ngModel)]="row.Consultar">
                    </mat-checkbox>
                </ng-template>

            </ngx-datatable-column>
            <ngx-datatable-column name="Editar" sortable="false" prop="id">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <mat-checkbox class="example-margin" [(ngModel)]="row.Editar" (change)="editarCheck(row)">
                    </mat-checkbox>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Eliminar" sortable="false" prop="id">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <mat-checkbox class="example-margin" [(ngModel)]="row.Eliminar" (change)="editarCheck(row)">
                    </mat-checkbox>
                </ng-template>
            </ngx-datatable-column>
            <!--   <ngx-datatable-column name="Acciones" sortable="false" prop="id">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>

                    <a (click)="eliminarTipoDocumento(row)">
                        <mat-icon color="warn" class="material-icons pointer" matTooltip="Clic para eliminar">delete</mat-icon>
                    </a>

                    <a (click)="guardarTipoDocumento(row)">
                        <mat-icon color="primary" class="material-icons pointer" matTooltip="Clic para editar">edit</mat-icon>
                    </a>

                </ng-template>
            </ngx-datatable-column>
            -->
        </ngx-datatable>
    </mat-tab>
    <mat-tab label="Usuarios" *ngIf="this.perfilUsuario.bActivo">
        <mat-form-field>

            <mat-label>Buscar</mat-label>
            <input type='text' matInput placeholder='' (keyup)='filterUsuarios($event)' [(ngModel)]="buscadorUsuarios">

        </mat-form-field>

        <mat-icon class="buscar">search</mat-icon>
        Seleccionar todos
        <mat-checkbox class="example-margin" [(ngModel)]="selectedUsuarios" (click)="seleccionarUsuarios()">
        </mat-checkbox>
        <ngx-datatable class="material" [rows]="rowUsuarios" [loadingIndicator]="loadingIndicator"
            [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'"
            [reorderable]="reorderable" [limit]="10">
            <ngx-datatable-column name="Usuario" prop="cUsuario"></ngx-datatable-column>
            <ngx-datatable-column name="Nombre (s)" prop="cNombre"></ngx-datatable-column>
            <ngx-datatable-column name="Nombre (s)" prop="cCorreo"></ngx-datatable-column>
            <ngx-datatable-column name="Añadir" sortable="false" prop="id">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <mat-checkbox class="example-margin" [(ngModel)]="row.Agregar">
                    </mat-checkbox>
                </ng-template>

            </ngx-datatable-column>
        </ngx-datatable>
    </mat-tab>
</mat-tab-group>

<mat-dialog-actions align="end">
    <button mat-raised-button color="warn" (click)="cerrar(true)">Cerrar</button>
    <button [disabled]="form.invalid" mat-raised-button color="accent" (click)="guardar()">Guardar</button>
</mat-dialog-actions>

<!-- </div> -->
<!-- / CONTENT -->

<!-- </div> -->